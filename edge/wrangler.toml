name = "boop-cat-sites"
main = "worker.js"
compatibility_date = "2025-12-18"

# Enable workers.dev subdomain (needed for custom domain fallback origin)
workers_dev = true

# Handle all traffic on the zone, including CF for SaaS custom hostnames
routes = [
  { pattern = "*/*", zone_name = "boop.cat" }
]

# Custom domain support - the fallback origin (sites.boop.cat) should CNAME to this worker
kv_namespaces = [
  { binding = "ROUTING", id = "3ba9d4ae9dcc431d84061e77c73b8fe7" }
]

[vars]
ROOT_DOMAIN = "boop.cat"
B2_DOWNLOAD_BASE = "https://f004.backblazeb2.com"
B2_BUCKET_NAME = "scan-blue-sites"

# Optimize for performance
[placement]
mode = "smart"
